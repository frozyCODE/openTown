<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Le Village Numérique Résistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            "scale-pulse": {
              "0%, 100%": { transform: "scale(1)" },
              "50%": { transform: "scale(1.05)" },
            },
            "scale-pulse-centered": {
              "0%, 100%": { transform: "translateX(-50%) scale(1)" },
              "50%": { transform: "translateX(-50%) scale(1.05)" },
            },
          },
          animation: {
            "scale-pulse": "scale-pulse 3s infinite ease-in-out",
            "scale-pulse-centered":
              "scale-pulse-centered 3s infinite ease-in-out",
          },
        },
      },
    };
  </script>
  <style>
    /* Empêche le flash de contenu non stylisé (FOUC) */
    body {
      color: black;
      transition: opacity 0.3s ease-in-out;
    }
  </style>
</head>

<body onload="document.body.style.opacity='1'">
  <%- include('partials/menu') %>
    <div id="village-map" class="relative w-screen h-screen bg-cover bg-center overflow-hidden"
      style="background-image: url('/images/FondVillage.png')">
      <a href="/nird-intro" id="batiment-nird"
        class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 top-[10%] left-[50%] -translate-x-1/2 <%= progress.nirdVisited ? '' : 'animate-scale-pulse-centered' %>">
        <img src="/images/mairie.png" alt="Hôtel de Ville NIRD" class="w-[300px] h-auto" />
        <span class="label text-shadow">N.I.R.D. (Départ)</span>
      </a>

      <% if (progress.nirdIntroCompleted) { %>

        <a href="/bibliotheque" id="batiment-bibliotheque"
          class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 top-[25%] left-[15%] <%= progress.jalon3Completed ? '' : 'animate-scale-pulse' %>">
          <img src="/images/bibliotheque.png" alt="Bibliothèque" class="w-[300px] h-auto" />
          <span class="label text-shadow">Bibliothèque (Jalons)</span>
        </a>

        <a href="/ecole" id="batiment-ecole"
          class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 top-[30%] right-[10%] <%= progress.examenReussi ? '' : 'animate-scale-pulse' %>">
          <img src="/images/ecole.png" alt="École" class="w-[350px] h-auto" />
          <span class="label text-shadow">École (Test)</span>
        </a>

        <a href="/base-militaire" id="batiment-militaire"
          class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 bottom-[10%] left-[30%] <%= progress.baseMilitaireVisited ? '' : 'animate-scale-pulse' %>">
          <img src="/images/militaire.png" alt="Base Militaire" class="w-[300px] h-auto" />
          <span class="label text-shadow">Base Militaire (Souveraineté)</span>
        </a>

        <a href="/voyante" id="batiment-voyante"
          class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 bottom-[10%] right-[30%] <%= progress.maisonVoyanteVisited ? '' : 'animate-scale-pulse' %>">
          <img src="/images/Voyante.png" alt="Maison de la Voyante" class="w-[300px] h-auto" />
          <span class="label text-shadow">La Voyante (Philosophie du Libre)</span>
        </a>

        <a href="/snake" id="buisson-cache"
          class="absolute flex flex-col items-center text-white font-bold drop-shadow-md transition-transform hover:scale-110 bottom-[20%] left-[5%] opacity-80">
          <img src="/images/buisson.png" alt="Buisson Caché" class="w-[100px] h-auto" />
        </a>

        <% } %>
    </div>
    <script src="/js/app.js"></script>
</body>

</html>